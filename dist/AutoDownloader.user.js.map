{"version":3,"sources":["../compiled/AutoDownloader.user.js"],"names":[],"mappings":"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","file":"AutoDownloader.user.js","sourcesContent":["\"use strict\";\r\nclass Episode {\r\n    constructor(res, downloadLink, seeds, leechers, uid, resides, title, size) {\r\n        this._res = res;\r\n        this._downloadLink = downloadLink;\r\n        this._seeds = seeds;\r\n        this._leechers = leechers;\r\n        this._uid = uid;\r\n        this._resides = resides;\r\n        this._title = title;\r\n        this._size = size;\r\n    }\r\n    get res() {\r\n        return this._res;\r\n    }\r\n    get downloadLink() {\r\n        return this._downloadLink;\r\n    }\r\n    get seeds() {\r\n        return this._seeds;\r\n    }\r\n    get leechers() {\r\n        return this._leechers;\r\n    }\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    get resides() {\r\n        return this._resides;\r\n    }\r\n    get title() {\r\n        return this._title;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    equals(ep) {\r\n        return this.uid === ep.uid;\r\n    }\r\n}\r\nclass _AbstractEps {\r\n    static abstractGetEps(skipSeedLimit) {\r\n        let minSeeds = Number.parseInt(Localstore.getMinSeedsFromStore());\r\n        if (minSeeds > -1 && skipSeedLimit === false) {\r\n            let arrayOfEps = [];\r\n            for (let i = 0, len = _AbstractEps.eps.length; i < len; i++) {\r\n                let currentEp = _AbstractEps.eps[i];\r\n                if (currentEp.seeds < minSeeds) {\r\n                    continue;\r\n                }\r\n                arrayOfEps.push(currentEp);\r\n            }\r\n            return arrayOfEps;\r\n        }\r\n        else {\r\n            return _AbstractEps.eps;\r\n        }\r\n    }\r\n    static addEp(ep) {\r\n        if (Anime.isValidRes(ep.res) === false) {\r\n            throw new TypeError('The Episode supplied does not have a valid resolution');\r\n        }\r\n        for (let i = 0, len = _AbstractEps.eps.length; i < len; i++) {\r\n            let epi = _AbstractEps.eps[i];\r\n            if (epi.equals(ep)) {\r\n                console.warn('The episode supplied already exsists, this episode has been ignored');\r\n                return;\r\n            }\r\n        }\r\n        _AbstractEps.eps.push(ep);\r\n    }\r\n    static removeEpisodeFromAnime(obj) {\r\n        let arr = _AbstractEps.eps;\r\n        let i = arr.length;\r\n        while (i--) {\r\n            if (arr[i] === obj) {\r\n                arr.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n_AbstractEps.eps = []; // this is the main array that holds all the episodes per anime\r\nclass Anime extends _AbstractEps {\r\n    constructor() {\r\n        super();\r\n    }\r\n    static get currentAnime() {\r\n        return Anime._currentAnime;\r\n    }\r\n    static set currentAnime(value) {\r\n        Anime._currentAnime = value;\r\n    }\r\n    static get currentSubber() {\r\n        return Anime._currentSubber;\r\n    }\r\n    static set currentSubber(value) {\r\n        Anime._currentSubber = value;\r\n    }\r\n    static get supportedRes() {\r\n        return Anime._supportedRes;\r\n    }\r\n    static addSupportedRes(res) {\r\n        Anime._supportedRes.push(res);\r\n    }\r\n    static get availableRes() {\r\n        return Anime._availableRes;\r\n    }\r\n    static addAvailableResolutions(res, fullRes) {\r\n        if (Anime._resExists(res)) {\r\n            return;\r\n        }\r\n        Anime._availableRes.push({ 'res': res, 'fullRes': fullRes });\r\n    }\r\n    static removeAvailableResolutions(resToRemove) {\r\n        for (let i = 0; i < Anime._availableRes.length; i++) {\r\n            let currentRes = Anime._availableRes[i];\r\n            if (currentRes.res === resToRemove || currentRes.fullRes === resToRemove) {\r\n                Anime._availableRes.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    static _resExists(_res) {\r\n        for (let i = 0; i < Anime._availableRes.length; i++) {\r\n            let currentRes = Anime._availableRes[i];\r\n            if (currentRes.res === _res || currentRes.fullRes === _res) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    static getTdFromTable(table, index) {\r\n        return table.find('td:nth-child(' + index + ')');\r\n    }\r\n    static avgSeedsForRes(res, skipSeedLimit) {\r\n        let seedCount = 0;\r\n        let epCount = Anime.getAmountOfEpsFromRes(res, skipSeedLimit);\r\n        if (epCount === 0) {\r\n            return 0;\r\n        }\r\n        let eps = super.abstractGetEps(skipSeedLimit);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            if (currentEp.res === res) {\r\n                seedCount += currentEp.res;\r\n            }\r\n        }\r\n        return Math.round(seedCount / epCount);\r\n    }\r\n    static avgPeersForRes(res, skipSeedLimit) {\r\n        let leechCount = 0;\r\n        let epCount = Anime.getAmountOfEpsFromRes(res, skipSeedLimit);\r\n        if (epCount === 0) {\r\n            return 0;\r\n        }\r\n        let eps = super.abstractGetEps(skipSeedLimit);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            if (currentEp.res === res) {\r\n                leechCount += currentEp.leechers;\r\n            }\r\n        }\r\n        return Math.round(leechCount / epCount);\r\n    }\r\n    static getTotalSizeForRes(res, skipSeedLimit, decimals = 3) {\r\n        let eps = Anime.getEpsForRes(res, skipSeedLimit);\r\n        return Utils.getHumanReadableSize(eps, decimals);\r\n    }\r\n    static getAmountOfEpsFromRes(res, skipSeedLimit) {\r\n        return Anime.getEpsForRes(res, skipSeedLimit).length;\r\n    }\r\n    static getEpsForRes(res, skipSeedLimit) {\r\n        let arrayOfEps = [];\r\n        let eps = super.abstractGetEps(skipSeedLimit);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            if (currentEp.res === res) {\r\n                arrayOfEps.push(currentEp);\r\n            }\r\n        }\r\n        return arrayOfEps;\r\n    }\r\n    static isValidRes(res) {\r\n        return Anime._resExists(res);\r\n    }\r\n    static addAllEps(eps) {\r\n        for (let i = 0; i < eps.length; i++) {\r\n            super.addEp(eps[i]);\r\n        }\r\n    }\r\n    static getUidFromJqueryObject(obj) {\r\n        if (obj.is('tr')) {\r\n            return (function () {\r\n                let currectTd = Anime.getNameTr(obj);\r\n                let tableRows = currectTd.find('a:not(a.comments)');\r\n                if (tableRows.length > 1) {\r\n                    throw 'Object must be unique';\r\n                }\r\n                return Anime._getUidFromAnchor(tableRows.get(0));\r\n            }());\r\n        }\r\n        return null;\r\n    }\r\n    static getNameTr(obj) {\r\n        return obj.find('td:nth-child(2)');\r\n    }\r\n    static getEpisodeFromAnchor(anchor) {\r\n        let link = (function () {\r\n            if (Utils.isjQueryObject(anchor)) {\r\n                return anchor.get(0);\r\n            }\r\n            return anchor;\r\n        }());\r\n        let uid = Anime._getUidFromAnchor(link);\r\n        return Anime.getEpisodeFromUid(uid, true);\r\n    }\r\n    static getEpisodeFromUid(uid, skipSeedLimit) {\r\n        let eps = super.abstractGetEps(skipSeedLimit);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            if (currentEp.uid === uid) {\r\n                return currentEp;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    static _getUidFromAnchor(anchor) {\r\n        if (typeof anchor === 'string') {\r\n            if (anchor.indexOf(\".torrent\") > -1) {\r\n                return anchor.replace(\".torrent\", \"\").split(\"/\").pop();\r\n            }\r\n            return anchor.split(\"/\").pop();\r\n        }\r\n        return anchor.href.split(\"/\").pop();\r\n    }\r\n    static getEpisodesFromResidence(resides, exclude, skipSeedLimit) {\r\n        let arrayOfEps = [];\r\n        let eps = super.abstractGetEps(skipSeedLimit);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            if (exclude === true) {\r\n                if (currentEp.resides !== resides) {\r\n                    arrayOfEps.push(currentEp);\r\n                }\r\n            }\r\n            else {\r\n                if (currentEp.resides === resides) {\r\n                    arrayOfEps.push(currentEp);\r\n                }\r\n            }\r\n        }\r\n        return arrayOfEps;\r\n    }\r\n    static getPageUrls() {\r\n        function range(start, end) {\r\n            // @ts-ignore\r\n            return Array(end - start + 1).fill().map((_, idx) => start + idx);\r\n        }\r\n        let pages = $(\".center > ul.pagination a\");\r\n        if (pages.length === 0) {\r\n            return [];\r\n        }\r\n        let firstPage = Utils.getElementFromJqueryArray(pages, 1);\r\n        let lastPage = Utils.getElementFromJqueryArray(pages, pages.length - 2);\r\n        let firstPageNumber = Number.parseInt(firstPage.text());\r\n        let lastPageNumber = Number.parseInt(lastPage.text());\r\n        let rangeBetween = range(firstPageNumber, lastPageNumber);\r\n        let baseUrl = window.location.href;\r\n        let urls = [];\r\n        let currentPage = QueryString.p === undefined ? 1 : QueryString.p;\r\n        for (let i = 0; i < rangeBetween.length; i++) {\r\n            let num = String(rangeBetween[i]);\r\n            if (num == currentPage) {\r\n                continue;\r\n            }\r\n            let newUrl = Utils.addParameter(baseUrl, \"p\", num.toString());\r\n            urls.push(newUrl);\r\n        }\r\n        return urls;\r\n    }\r\n    static removeEpisodesFromUid(uid) {\r\n        let episode = Anime.getEpisodeFromUid(uid, true);\r\n        super.removeEpisodeFromAnime(episode);\r\n    }\r\n    static removeEpisodesFromResidence(resides, exclude) {\r\n        let eps = Anime.getEpisodesFromResidence(resides, exclude, true);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let currentEp = eps[i];\r\n            this.removeEpisodeFromAnime(currentEp);\r\n        }\r\n    }\r\n    static getAmountOfEps() {\r\n        return super.abstractGetEps(true).length;\r\n    }\r\n    static getEpisodeFromUrl(url) {\r\n        let eps = super.abstractGetEps(true);\r\n        for (let i = 0, len = eps.length; i < len; i++) {\r\n            let ep = eps[i];\r\n            if (ep.downloadLink === url) {\r\n                return ep;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\nAnime._availableRes = [];\r\nAnime._supportedRes = [{ \"res\": 1080, \"fullRes\": \"1920x1080\" }, {\r\n        \"res\": 720,\r\n        \"fullRes\": \"1280x720\"\r\n    }, { \"res\": 480, \"fullRes\": \"640x480\" }, { \"res\": 360, \"fullRes\": \"640x360\" }];\r\nclass Utils {\r\n    constructor() {\r\n    }\r\n    static downloadViaJavaScript(url, data, callBack, _type = \"POST\", fileName = null) {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(_type, url, true);\r\n        xhr.responseType = \"blob\";\r\n        xhr.withCredentials = true;\r\n        if (_type == \"POST\") {\r\n            xhr.setRequestHeader(\"Content-type\", \"application/json\");\r\n        }\r\n        let hasError = false;\r\n        let mediaType = null;\r\n        xhr.onreadystatechange = function () {\r\n            let error = null;\r\n            if (xhr.readyState === XMLHttpRequest.DONE) {\r\n                if (hasError) {\r\n                    if (xhr.response != null && xhr.response.length > 0) {\r\n                        error = xhr.response;\r\n                    }\r\n                    else {\r\n                        error = \"internal server error\";\r\n                    }\r\n                }\r\n                let contentDispositionHeader = xhr.getResponseHeader(\"Content-Disposition\");\r\n                if (fileName == null && contentDispositionHeader != null && contentDispositionHeader.indexOf(\"filename\") > -1) {\r\n                    fileName = contentDispositionHeader.split(\"filename\").pop();\r\n                    fileName = fileName.replace(\"=\", \"\");\r\n                    fileName = fileName.trim();\r\n                    fileName = fileName.replace(/\"/g, \"\");\r\n                }\r\n                let mediaTypeHeader = xhr.getResponseHeader(\"Content-Type\");\r\n                if (mediaTypeHeader != null) {\r\n                    mediaType = mediaTypeHeader;\r\n                }\r\n                else {\r\n                    mediaType = \"application/octet-stream\";\r\n                }\r\n                let blob = xhr.response;\r\n                /*let returnFunction = function save() {\r\n                    if (hasError) {\r\n                        let error:string = \"Unable to download file: '\" +fileName+ \"' Please download this file manually\";\r\n                        alert(error);\r\n                        return;\r\n                    }\r\n                }.bind(this, );*/\r\n                let saveAsFunc = saveAs.bind(this, blob, fileName, true);\r\n                callBack.call(this, blob, fileName, hasError, error, saveAsFunc);\r\n            }\r\n            else if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n                if (xhr.status !== 200) {\r\n                    xhr.responseType = \"text\";\r\n                    hasError = true;\r\n                }\r\n            }\r\n        };\r\n        if (_type === \"POST\") {\r\n            xhr.send(JSON.stringify(data));\r\n        }\r\n        else {\r\n            xhr.send();\r\n        }\r\n    }\r\n    ;\r\n    static sortSelect(selElem) {\r\n        let tmpAry = [];\r\n        for (let i = 0, length = selElem.options.length; i < length; i++) {\r\n            tmpAry[i] = [];\r\n            tmpAry[i][0] = selElem.options[i].text;\r\n            tmpAry[i][1] = selElem.options[i].dataset.url;\r\n        }\r\n        tmpAry.sort(function (a, b) {\r\n            // @ts-ignore\r\n            return a[0].toUpperCase().localeCompare(b[0].toUpperCase());\r\n        });\r\n        selElem.innerHTML = \"\";\r\n        for (let i = 0, len = tmpAry.length; i < len; i++) {\r\n            let op = new Option(tmpAry[i][0]);\r\n            op.dataset.url = tmpAry[i][1];\r\n            selElem.options[i] = op;\r\n        }\r\n    }\r\n    static injectCss(css) {\r\n        function _isUrl(url) {\r\n            let matcher = new RegExp(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/);\r\n            return matcher.test(url);\r\n        }\r\n        if (_isUrl(css)) {\r\n            $(\"<link>\").prop({\r\n                \"type\": \"text/css\",\r\n                \"rel\": \"stylesheet\"\r\n            }).attr(\"href\", css).appendTo(\"head\");\r\n        }\r\n        else {\r\n            $(\"<style>\").prop(\"type\", \"text/css\").html(css).appendTo(\"head\");\r\n        }\r\n    }\r\n    static addParameter(url, parameterName, parameterValue, atStart = false) {\r\n        let replaceDuplicates = true;\r\n        let urlhash;\r\n        let cl;\r\n        if (url.indexOf('#') > 0) {\r\n            cl = url.indexOf('#');\r\n            urlhash = url.substring(url.indexOf('#'), url.length);\r\n        }\r\n        else {\r\n            urlhash = '';\r\n            cl = url.length;\r\n        }\r\n        let sourceUrl = url.substring(0, cl);\r\n        let urlParts = sourceUrl.split(\"?\");\r\n        let newQueryString = \"\";\r\n        if (urlParts.length > 1) {\r\n            let parameters = urlParts[1].split(\"&\");\r\n            for (let i = 0; (i < parameters.length); i++) {\r\n                let parameterParts = parameters[i].split(\"=\");\r\n                if (!(replaceDuplicates && parameterParts[0] == parameterName)) {\r\n                    if (newQueryString == \"\") {\r\n                        newQueryString = \"?\";\r\n                    }\r\n                    else {\r\n                        newQueryString += \"&\";\r\n                    }\r\n                    newQueryString += parameterParts[0] + \"=\" + (parameterParts[1] ? parameterParts[1] : '');\r\n                }\r\n            }\r\n        }\r\n        if (newQueryString == \"\") {\r\n            newQueryString = \"?\";\r\n        }\r\n        if (atStart) {\r\n            newQueryString = '?' + parameterName + \"=\" + parameterValue + (newQueryString.length > 1 ? '&' + newQueryString.substring(1) : '');\r\n        }\r\n        else {\r\n            if (newQueryString !== \"\" && newQueryString != '?')\r\n                newQueryString += \"&\";\r\n            newQueryString += parameterName + \"=\" + (parameterValue ? parameterValue : '');\r\n        }\r\n        return urlParts[0] + newQueryString + urlhash;\r\n    }\r\n    static getElementFromJqueryArray(elm, index) {\r\n        return elm.filter(function (i) {\r\n            return i === index;\r\n        });\r\n    }\r\n    ;\r\n    static getTable() {\r\n        return $('table');\r\n    }\r\n    static getQueryFromUrl(url) {\r\n        return url.split(\"&\").reduce(function (prev, curr, i, arr) {\r\n            let p = curr.split(\"=\");\r\n            prev[decodeURIComponent(p[0])] = decodeURIComponent(p[1]);\r\n            return prev;\r\n        }, {});\r\n    }\r\n    static isjQueryObject(obj) {\r\n        return obj instanceof jQuery || 'jquery' in Object(obj);\r\n    }\r\n    static disableButton(button) {\r\n        button.prop('disabled', true);\r\n    }\r\n    static enableButton(button) {\r\n        button.prop('disabled', false);\r\n    }\r\n    // @ts-ignore\r\n    static doDownloads(event) {\r\n        $('#crossPage').prop('disabled', true);\r\n        let type = $(event.target).data('type');\r\n        let html = UI.builDownloadAlert(type);\r\n        let urlsToDownload = [];\r\n        $('#alertUser').html(html).slideDown(\"slow\").show();\r\n        if (type === 'downloadSelected') {\r\n            $.each($('.checkboxes:checked').prev('a'), function () {\r\n                let ep = Anime.getEpisodeFromAnchor(this);\r\n                urlsToDownload.push(ep.downloadLink);\r\n            });\r\n        }\r\n        else if (type === 'downloadSelects') {\r\n            $.each($('#animeSelection option:selected'), function () {\r\n                let url = this.dataset.url;\r\n                urlsToDownload.push(url);\r\n            });\r\n        }\r\n        else {\r\n            let eps = Anime.getEpsForRes(parseInt($('#downloadRes').val()), false);\r\n            for (let i = 0, len = eps.length; i < len; i++) {\r\n                urlsToDownload.push(eps[i].downloadLink);\r\n            }\r\n        }\r\n        bindAlertControls();\r\n        function bindAlertControls() {\r\n            $('#alertButtonCancel').on('click', function () {\r\n                $('#alertUser').slideUp('slow');\r\n                $('#crossPage').prop('disabled', false);\r\n            });\r\n            $('#alertButton').on('click', function () {\r\n                doIt(urlsToDownload, false);\r\n            });\r\n            $(\"#downloadZip\").on(\"click\", function () {\r\n                doIt(urlsToDownload, true);\r\n            });\r\n        }\r\n        function doIt(urls, asZip) {\r\n            let ajaxPromiseMap = new Map();\r\n            let arrayd = [];\r\n            for (let i = 0; i < urls.length; i++) {\r\n                let d = $.Deferred();\r\n                ajaxPromiseMap.set(urls[i], d);\r\n                arrayd.push(d);\r\n            }\r\n            $.when.apply($, arrayd).done(function () {\r\n                if (!asZip) {\r\n                    return;\r\n                }\r\n                // @ts-ignore\r\n                let zip = new JSZip();\r\n                let errors = [];\r\n                if (arrayd.length === 1) {\r\n                    let blob = arguments[0];\r\n                    let fileName = arguments[1];\r\n                    let error = arguments[2];\r\n                    if (error !== null) {\r\n                        errors.push(fileName);\r\n                    }\r\n                    else {\r\n                        zip.file(fileName, blob);\r\n                    }\r\n                }\r\n                else {\r\n                    for (let i = 0; i < arguments.length; i++) {\r\n                        let arg = arguments[i];\r\n                        let blob = arg[0];\r\n                        let fileName = arg[1];\r\n                        let error = arg[2];\r\n                        if (error !== null) {\r\n                            errors.push(fileName);\r\n                        }\r\n                        else {\r\n                            zip.file(fileName, blob);\r\n                        }\r\n                    }\r\n                }\r\n                if (errors.length > 0) {\r\n                    let errorMessage = \"Unable to download the following files: \\n\" + errors.join(\"\\n\") + \"\\n Please download these files manually\";\r\n                    alert(errorMessage);\r\n                }\r\n                $(\"#progressStatus\").text(\"Generating zip file...\");\r\n                zip.generateAsync({ type: \"blob\" }).then(function (blob) {\r\n                    saveAs(blob, Anime.currentAnime + \".zip\");\r\n                    $(\"#loadingContainer\").hide();\r\n                    $(\"#progressStatus\").text(null);\r\n                    $(\"#progressBarForZip\").width(0);\r\n                    $('#alertUser').slideUp('slow');\r\n                }, function (err) {\r\n                    alert(err);\r\n                });\r\n            });\r\n            let timerOffset = 0;\r\n            if (asZip) {\r\n                $(\"#loadingContainer\").show();\r\n            }\r\n            let count = 0;\r\n            for (let [currentUrl, deferr] of ajaxPromiseMap) {\r\n                let ep = Anime.getEpisodeFromUrl(currentUrl);\r\n                let fileName = ep.title.replace(/ /g, \"_\") + \".torrent\";\r\n                setTimeout(() => {\r\n                    count++;\r\n                    Utils.downloadViaJavaScript(currentUrl, undefined, (blob, fileName, hasError, error, saveFunc) => {\r\n                        if (!asZip) {\r\n                            saveFunc();\r\n                        }\r\n                        else {\r\n                            let percent = Math.floor(100 * count / ajaxPromiseMap.size);\r\n                            let doneAsString = percent + \"%\";\r\n                            $(\"#progressStatus\").text(\"Downloading torrents: \" + doneAsString);\r\n                            $(\"#progressBarForZip\").width(doneAsString);\r\n                        }\r\n                        if (hasError) {\r\n                            deferr.resolve(blob, fileName, error);\r\n                        }\r\n                        else {\r\n                            deferr.resolve(blob, fileName, null);\r\n                        }\r\n                    }, \"GET\", fileName);\r\n                }, timerOffset);\r\n                timerOffset += 450;\r\n            }\r\n            if (!asZip) {\r\n                $('#alertUser').slideUp('slow');\r\n            }\r\n            $('#crossPage').prop('disabled', false);\r\n        }\r\n    }\r\n    static checkBoxValid(checkbox) {\r\n        return checkbox.is(':checked');\r\n    }\r\n    //TODO: check this\r\n    static _minSeedsSet() {\r\n        let seeds = Localstore.getMinSeedsFromStore();\r\n        if (seeds !== null && seeds.length > 0) {\r\n            return Number.parseInt(seeds) !== 1;\r\n        }\r\n        return false;\r\n    }\r\n    static getCurrentPageOffset() {\r\n        return parseInt((typeof QueryString.p === 'undefined') ? 1 : QueryString.p);\r\n    }\r\n    static arrayCopy(array, deep = false) {\r\n        return $.extend(deep, [], array);\r\n    }\r\n    static cleanAvailableResolutions() {\r\n        let avRes = Utils.arrayCopy(Anime.availableRes, true);\r\n        for (let i = 0, len = avRes.length; i < len; i++) {\r\n            let currentRes = avRes[i].res;\r\n            if (Anime.getAmountOfEpsFromRes(currentRes, true) === 0) {\r\n                Anime.removeAvailableResolutions(currentRes);\r\n            }\r\n        }\r\n    }\r\n    static sortAllControls() {\r\n        Utils.sortSelect(document.getElementById('animeSelection'));\r\n        Utils.sortSelect(document.getElementById('downloadRes'));\r\n        // @ts-ignore\r\n        $('#info').sortTable(0);\r\n    }\r\n    static reBindSelectFilters() {\r\n        // @ts-ignore\r\n        $('input[name=\\'filterSelect\\']').offOn('change', handleSelect);\r\n        // @ts-ignore\r\n        $('#clearResOptions').offOn('click', handleSelect);\r\n        // @ts-ignore\r\n        $(\"#animeSelection\").offOn(\"click\", function () {\r\n            UI.autoEnableAcceptSelect();\r\n        });\r\n        // @ts-ignore\r\n        $(\"#selectAllFromControl\").offOn(\"click\", function () {\r\n            let allSelected = $(\"#animeSelection option:selected\").length === $(\"#animeSelection option\").length;\r\n            if (allSelected) {\r\n                $(this).text(\"Select all\");\r\n                $(\"#animeSelection option\").prop(\"selected\", false);\r\n            }\r\n            else {\r\n                $(this).text(\"deselect all\");\r\n                $(\"#animeSelection option\").prop(\"selected\", true);\r\n            }\r\n            UI.autoEnableAcceptSelect();\r\n        });\r\n        function handleSelect(event) {\r\n            let resTOFilter = $(event.target).data('set');\r\n            $('#selectAnime').html(UI.buildSelect(resTOFilter));\r\n            Utils.sortAllControls();\r\n            let searchApplied = UI.getAppliedSearch();\r\n            if (searchApplied !== '') {\r\n                UI.applySearch(searchApplied);\r\n            }\r\n            Utils.reBindSelectFilters();\r\n        }\r\n    }\r\n    static getHumanReadableSize(from, decimals = 3) {\r\n        let bits = 0;\r\n        if (Array.isArray(from)) {\r\n            for (let i = 0; i < from.length; i++) {\r\n                let ep = from[i];\r\n                bits += ep.size;\r\n            }\r\n        }\r\n        else if (typeof from === 'number') {\r\n            bits = from;\r\n        }\r\n        else {\r\n            bits += from.size;\r\n        }\r\n        function formatBytes(bytes, decimals) {\r\n            if (bytes == 0) {\r\n                return '0 Byte';\r\n            }\r\n            let k = 1024;\r\n            let dm = decimals + 1 || 3;\r\n            let sizes = [\r\n                'Bytes',\r\n                'KB',\r\n                'MB',\r\n                'GB',\r\n                'TB',\r\n                'PB',\r\n                'EB',\r\n                'ZB',\r\n                'YB'\r\n            ];\r\n            let i = Math.floor(Math.log(bytes) / Math.log(k));\r\n            return (bytes / Math.pow(k, i)).toPrecision(dm) + ' ' + sizes[i];\r\n        }\r\n        return formatBytes(bits, decimals);\r\n    }\r\n}\r\nclass UI {\r\n    constructor() {\r\n    }\r\n    static buildTable() {\r\n        let html = '';\r\n        html += '<table class=\"table table-bordered table-hover table-striped torrent-list\" style=\\'width: 100%\\' id=\\'info\\'>';\r\n        html += '<caption>Download infomation</caption>';\r\n        html += '<thead>';\r\n        html += '<tr>';\r\n        html += '<th>resolution</th>';\r\n        html += '<th>Episode count</th>';\r\n        html += '<th>Average seeds</th>';\r\n        html += '<th>Average leechers</th>';\r\n        html += '<th>Total size</th>';\r\n        html += '</tr>';\r\n        html += '</thead>';\r\n        html += '<tbody>';\r\n        let allRes = Anime.availableRes;\r\n        for (let i = 0; i < allRes.length; i++) {\r\n            let currRes = allRes[i];\r\n            let localRes = currRes.res;\r\n            html += '<tr>';\r\n            html += '<td>' + (localRes === -1 ? 'Others' : localRes + 'p') + '</td>';\r\n            html += '<td>' + Anime.getAmountOfEpsFromRes(localRes, true) + '</td>';\r\n            html += '<td>' + Anime.avgSeedsForRes(localRes, true) + '</td>';\r\n            html += '<td>' + Anime.avgPeersForRes(localRes, true) + '</td>';\r\n            html += '<td>' + Anime.getTotalSizeForRes(localRes, true) + ' (aprox)</td>';\r\n            html += '</tr>';\r\n        }\r\n        html += '</tbody>';\r\n        html += '</table>';\r\n        return html;\r\n    }\r\n    static stateChangeAcceptSelect(state) {\r\n        // @ts-ignore\r\n        $(\"#acceptSelect\").enableButton(state);\r\n    }\r\n    static autoEnableAcceptSelect() {\r\n        let selection = $(\"#animeSelection option:selected\");\r\n        UI.stateChangeAcceptSelect(selection.length > 0);\r\n    }\r\n    static buildDropdownSelections() {\r\n        let html = '';\r\n        html += '<select class=\"form-control\" style=\"margin-right:5px;display: inline;width: auto;\" id=\"downloadRes\">';\r\n        let allRes = Anime.availableRes;\r\n        for (let i = 0; i < allRes.length; i++) {\r\n            let currRes = allRes[i];\r\n            let localRes = currRes.res;\r\n            html += '<option value=' + localRes + '>' + (localRes === -1 ? 'Others' : localRes + 'p') + '</option>';\r\n        }\r\n        html += '</select>';\r\n        return html;\r\n    }\r\n    static builDownloadAlert(type) {\r\n        let amountOfAnime = 0;\r\n        let selectedRes = Number.parseInt($('#downloadRes').val());\r\n        let res = null;\r\n        let totalSize = null;\r\n        if (type === 'downloadSelected') {\r\n            amountOfAnime = $('.checkboxes:checked').length;\r\n            res = 'custom';\r\n        }\r\n        else if (type === 'downloadSelects') {\r\n            amountOfAnime = $('#animeSelection option:selected').length;\r\n            totalSize = Utils.getHumanReadableSize((function () {\r\n                let localSize = 0;\r\n                $('#animeSelection option:selected').each(function () {\r\n                    let url = this.dataset.url;\r\n                    localSize += Anime.getEpisodeFromAnchor(url).size;\r\n                });\r\n                return localSize;\r\n            }()));\r\n            res = 'custom';\r\n        }\r\n        else {\r\n            amountOfAnime = Anime.getAmountOfEpsFromRes(selectedRes, false);\r\n            res = selectedRes === -1 ? 'Others' : selectedRes + 'p';\r\n            totalSize = Anime.getTotalSizeForRes(parseInt(res), false);\r\n        }\r\n        let seedLimit = Localstore.getMinSeedsFromStore();\r\n        if (seedLimit === \"-1\") {\r\n            seedLimit = \"none\";\r\n        }\r\n        let html = '';\r\n        html += '<div class=\\'alert alert-success\\'>';\r\n        html += '<div><strong>Download: ' + res + '</strong></div> <br />';\r\n        html += '<div><strong>Seed Limit: ' + seedLimit + '</strong></div>';\r\n        if (totalSize !== null) {\r\n            html += '<br /><div><strong>Total size: ' + totalSize + ' (aprox)</strong></div>';\r\n        }\r\n        html += '<p>You are about to download ' + amountOfAnime + ' ep(s)</p>';\r\n        html += '<p>This will cause ' + amountOfAnime + ' download pop-up(s) Are you sure you want to continue?</p>';\r\n        html += '<p>If there are a lot of eps, your browser might stop responding for a while. This is normal. If you are on Google Chrome, it will ask you to allow multiple-downloads</p>';\r\n        html += '<button type=\"button\" class=\"btn btn-warning downloadButton\" id=\\'alertButtonCancel\\'>Cancel</button>';\r\n        html += '<button type=\"button\" class=\"btn btn-success downloadButton\" id=\\'alertButton\\'>Okay</button>';\r\n        html += '<button type=\"button\" class=\"btn btn-success downloadButton\" id=\\'downloadZip\\'>Download as zip</button>';\r\n        html += \"<div class='hidden' id='loadingContainer'>\";\r\n        html += \"<hr />\";\r\n        html += \"<div class=\\\"progress\\\">\";\r\n        html += \"<div id='progressBarForZip' class=\\\"progress-bar progress-bar-striped active\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"45\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style='width: 100%;'>Current status: <span id='progressStatus'></span></div>\";\r\n        html += \"</div>\";\r\n        html += \"</div>\";\r\n        html += '</div>';\r\n        return html;\r\n    }\r\n    static showAjaxErrorAlert(ajaxInfo) {\r\n        let parseError = $('#parseErrors');\r\n        if (!parseError.is(':hidden')) {\r\n            return null;\r\n        }\r\n        parseError.html('');\r\n        let html = '';\r\n        html += '<div class=\\'alert alert-danger\\'>';\r\n        html += '<p>There was an error in getting the information from page: \\'' + ajaxInfo.error.pageAtError + '\\'</p>';\r\n        html += '<button id=\\'errorClose\\' class=\"btn btn-primary\"> close </button>';\r\n        html += '</div>';\r\n        parseError.show();\r\n        parseError.html(html);\r\n        $('#errorClose').off('click').on('click', function () {\r\n            $('#parseErrors').slideUp('slow', function () {\r\n                $(this).html('');\r\n            });\r\n        });\r\n    }\r\n    static buildSelect(resTOFilter = \"none\") {\r\n        let html = '';\r\n        UI.epsInSelect = [];\r\n        let minSeeds = Number.parseInt(Localstore.getMinSeedsFromStore());\r\n        html += '<div id=\\'selectWrapper\\'>';\r\n        html += '<div id=\\'selectContainer\\'>';\r\n        html += '<p>Or you can select episodes here:</p>';\r\n        html += '<p>Seed limit: ' + (minSeeds === -1 ? 'None' : minSeeds) + '</p>';\r\n        html += '<select class=\"form-control\" id=\\'animeSelection\\' multiple size=\\'20\\'>';\r\n        let allRes = Anime.availableRes;\r\n        for (let i = 0; i < allRes.length; i++) {\r\n            let currRes = allRes[i];\r\n            let localRes = currRes.res;\r\n            let eps = Anime.getEpsForRes(localRes, false);\r\n            for (let j = 0, len = eps.length; j < len; j++) {\r\n                let currentEp = eps[j];\r\n                if (resTOFilter == 'none' || currentEp.res == resTOFilter) {\r\n                    html += '<option data-url=\\'' + currentEp.downloadLink + '\\'>';\r\n                    html += currentEp.title + ' - Seeders: ' + currentEp.seeds;\r\n                    UI.epsInSelect.push(currentEp);\r\n                    html += '</option>';\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        html += '</select>';\r\n        html += '<span>Filter select control: </span>';\r\n        let checked = false;\r\n        for (let i = 0; i < allRes.length; i++) {\r\n            if (resTOFilter == allRes[i].res) {\r\n                checked = true;\r\n            }\r\n            html += '<input type=\\'radio\\' ' + (checked ? 'checked' : '') + ' data-set= \\'' + allRes[i].res + '\\' name=\\'filterSelect\\'/>' + '<label class=\"filterLabel\">' + (allRes[i].res === -1 ? 'Others' : allRes[i].res + 'p') + '</label>';\r\n            checked = false;\r\n        }\r\n        html += '<a id=\\'clearResOptions\\' data-set=\\'none\\' >clear resolution filter</a>';\r\n        html += '<a id=\\'selectAllFromControl\\'>Select all</a>';\r\n        html += '</div>';\r\n        html += '</div>';\r\n        // @ts-ignore\r\n        $(\"#acceptSelect\").enableButton(false);\r\n        return html;\r\n    }\r\n    static applySearch(textToFilter) {\r\n        let opts = UI.epsInSelect;\r\n        let rxp = new RegExp(textToFilter);\r\n        let optlist = $('#animeSelection').empty();\r\n        for (let i = 0, len = opts.length; i < len; i++) {\r\n            let ep = opts[i];\r\n            if (rxp.test(ep.title)) {\r\n                optlist.append('<option data-url=\\'' + ep.downloadLink + '\\'>' + ep.title + ' - Seeders: ' + ep.seeds + '</option>');\r\n            }\r\n        }\r\n        UI.searchApplied = textToFilter;\r\n        Utils.sortSelect(document.getElementById(\"animeSelection\"));\r\n        UI.autoEnableAcceptSelect();\r\n    }\r\n    static getAppliedSearch() {\r\n        return UI.searchApplied;\r\n    }\r\n    static getEpsInSelect() {\r\n        return UI.epsInSelect;\r\n    }\r\n}\r\nUI.epsInSelect = [];\r\nUI.searchApplied = '';\r\nclass DataParser {\r\n    constructor(table) {\r\n        this.table = null;\r\n        this.table = table;\r\n    }\r\n    parseTable(currentPage) {\r\n        let trRow = this.table.find('img[src*=\\'/static/img/icons/nyaa/1_2.png\\']').closest('tr');\r\n        let eps = [];\r\n        $.each($(trRow), function () {\r\n            let resInfo = parseRes(this);\r\n            if (resInfo === null) {\r\n                Anime.addAvailableResolutions(-1, null);\r\n            }\r\n            else {\r\n                Anime.addAvailableResolutions(resInfo.res, resInfo.fullRes);\r\n            }\r\n            let info = getEpisodeInfo(this);\r\n            eps.push(new Episode(typeof resInfo.res === ('undefined') ? -1 : resInfo.res, info.currentDownloadLink, info.seeds, info.leech, info.uid, currentPage, info.title, info.size));\r\n        });\r\n        return eps;\r\n        function parseRes(eventContent) {\r\n            let supportedRes = Anime.supportedRes;\r\n            for (let i = 0; i < supportedRes.length; i++) {\r\n                let currRes = supportedRes[i].res;\r\n                let currFullRes = supportedRes[i].fullRes;\r\n                if ($(eventContent).children('td:nth-child(2)').text().indexOf(currRes + 'p') > -1 || $(eventContent).children('td:nth-child(2)').text().indexOf(currFullRes) > -1) {\r\n                    return supportedRes[i];\r\n                }\r\n            }\r\n        }\r\n        function getEpisodeInfo(eventContent) {\r\n            let _eventContent = $(eventContent);\r\n            let currentDownloadLink = Anime.getTdFromTable(_eventContent, 3).find(\"a\")[0].href;\r\n            function getTextContent(idx) {\r\n                return (isNaN(parseInt(Anime.getTdFromTable(_eventContent, idx).text()))) ? 0 : parseInt(Anime.getTdFromTable(_eventContent, idx).text());\r\n            }\r\n            function convertToString(ev) {\r\n                let sizeValue = Anime.getTdFromTable(ev, 4).text();\r\n                let sizeText = $.trim(sizeValue.split(' ').pop());\r\n                let intValue = parseInt(sizeValue);\r\n                switch (sizeText) {\r\n                    case \"MiB\":\r\n                        return ((Math.pow(2, 20))) * intValue;\r\n                    case \"GiB\":\r\n                        return intValue * 1073741824;\r\n                    default:\r\n                        return 0;\r\n                }\r\n            }\r\n            let seeds = getTextContent(6);\r\n            let leech = getTextContent(7);\r\n            let title = Anime.getTdFromTable(_eventContent, 2).text().trim().substring(1).trim();\r\n            let uid = Anime.getUidFromJqueryObject(_eventContent);\r\n            let size = convertToString(_eventContent);\r\n            return {\r\n                'currentDownloadLink': currentDownloadLink,\r\n                'seeds': seeds,\r\n                'leech': leech,\r\n                'title': title,\r\n                'uid': uid,\r\n                \"size\": size\r\n            };\r\n        }\r\n    }\r\n}\r\nclass Localstore {\r\n    constructor() {\r\n    }\r\n    static getMinSeedsFromStore() {\r\n        let lo = localStorage.getItem('minSeeds');\r\n        return lo === null ? \"-1\" : lo;\r\n    }\r\n    static setMinSeedsFromStore(seeds) {\r\n        localStorage.setItem('minSeeds', seeds.toString());\r\n    }\r\n    static removeMinSeedsFromStore() {\r\n        localStorage.removeItem('minSeeds');\r\n    }\r\n}\r\nlet QueryString = (() => {\r\n    if (typeof window == \"undefined\") {\r\n        return {};\r\n    }\r\n    let query_string = {};\r\n    let query = window.location.search.substring(1);\r\n    let vars = query.split(\"&\");\r\n    for (let i = 0; i < vars.length; i++) {\r\n        let pair = vars[i].split(\"=\");\r\n        if (typeof query_string[pair[0]] === \"undefined\") {\r\n            query_string[pair[0]] = pair[1];\r\n        }\r\n        else if (typeof query_string[pair[0]] === \"string\") {\r\n            query_string[pair[0]] = [query_string[pair[0]], pair[1]];\r\n        }\r\n        else {\r\n            query_string[pair[0]].push(pair[1]);\r\n        }\r\n    }\r\n    return query_string;\r\n})();\r\n// Download fix for firefox\r\nHTMLElement.prototype.click = function () {\r\n    let evt = this.ownerDocument.createEvent('MouseEvents');\r\n    evt.initMouseEvent('click', true, true, this.ownerDocument.defaultView, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n    this.dispatchEvent(evt);\r\n};\r\nclass Main {\r\n    constructor() {\r\n    }\r\n    static main() {\r\n        Main.setAnimeObj();\r\n        Main.buildUi();\r\n        Main.bindListeners();\r\n    }\r\n    static setAnimeObj() {\r\n        if (QueryString.q !== '') {\r\n            Anime.currentAnime = decodeURIComponent(QueryString.q).split('+').join(' ');\r\n        }\r\n        else {\r\n            Anime.currentAnime = \"unknown\";\r\n        }\r\n        let paths = window.location.pathname.split(\"/\");\r\n        Anime.currentSubber = paths[2];\r\n        let instance = new DataParser(Utils.getTable());\r\n        let eps = instance.parseTable(Utils.getCurrentPageOffset());\r\n        Anime.addAllEps(eps);\r\n    }\r\n    static buildUi() {\r\n        makeStyles();\r\n        buildPanel();\r\n        afterBuild();\r\n        function makeStyles() {\r\n            let styles = '';\r\n            styles += '.collapsem{cursor: pointer; position: absolute; right: 4px; top: 2px;}';\r\n            styles += '.panel-success > .panel-heading {position: relative;}';\r\n            styles += '.avgSeeds{floar:left; padding-right:10px; color:#3c763d;}';\r\n            styles += '.checkboxes{left:1px; margin:0; padding:0; position: relative; top: 1px; z-index: 1;}';\r\n            styles += '#topbar{z-index: 2 !important;}';\r\n            styles += 'label[for=\\'MinSeeds\\']{ display: block; margin-top: 10px;}';\r\n            styles += '.filterLabel{margin-right: 10px;}';\r\n            styles += '.alert {position:relative;}';\r\n            styles += '#alertUser, #parseErrors{margin-top: 15px;}';\r\n            styles += \".downloadButton {position:absolute; bottom:5px;}\";\r\n            styles += '#alertButton{right:78px;}';\r\n            styles += '#alertButtonCancel{right: 5px;}';\r\n            styles += '#downloadZip{right: 140px;}';\r\n            styles += '#errorClose{position:absolute; bottom:5px; right: 11px;}';\r\n            styles += '#animeSelection{width: 100%;}';\r\n            styles += '#clearResOptions{margin-left: 10px; margin-right: 10px ;cursor: pointer;}';\r\n            styles += '#selectAllFromControl{cursor: pointer;}';\r\n            styles += '#downloadCustomButton{float:right;}';\r\n            styles += '#findEp{float: right; position: relative; bottom: 20px; width: 180px;}';\r\n            styles += \"#loadingContainer{margin-top: 15px; margin-bottom: 45px;}\";\r\n            Utils.injectCss('https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css');\r\n            Utils.injectCss(styles);\r\n        }\r\n        function buildPanel() {\r\n            let html = '';\r\n            html += '<div class=\"panel panel-success\">';\r\n            html += '<div class=\"panel-heading\">';\r\n            html += '<h3 id=\"panel-title\" class=\"panel-title\"></h3>';\r\n            html += '<i class=\"fa fa-minus collapsem\" id=\"collapseToggle\" title=\"Hide\"></i>';\r\n            html += '</div>';\r\n            html += '<div class=\"panel-body\" id=\"pannelContent\"></div>';\r\n            html += '</div>';\r\n            $('.container > .row > h3').after(html);\r\n            buildPanelContent();\r\n            function buildPanelContent() {\r\n                let html = '';\r\n                html += '<div>';\r\n                $('#panel-title').html('<span> Download \"' + Anime.currentAnime + ' (' + Anime.currentSubber + ')\"</span>');\r\n                if (Anime.getAmountOfEps() === 0) {\r\n                    html += '<span> No translated anime found or error occured</span>';\r\n                    html += '</div>';\r\n                    $('#pannelContent').html(html);\r\n                    return;\r\n                }\r\n                html += '<span>Pick a resolution: </span>';\r\n                html += '<span id=\\'selectDownload\\'>';\r\n                html += UI.buildDropdownSelections();\r\n                html += '</span>';\r\n                html += '<button class=\"btn btn-default\" type=\"button\" data-type=\\'downloadAll\\' id=\"downloadAll\">Download all</button>';\r\n                html += '<button class=\"btn btn-default\" type=\\'button\\' id=\\'downloadCustomButton\\' data-type=\\'downloadSelected\\' >download your selected items</button>';\r\n                html += '</div>';\r\n                html += '<div id=\\'options\\'>';\r\n                html += '<div class=\"checkbox\">';\r\n                html += \"<label>\";\r\n                html += '<input type=\\'checkbox\\' id=\\'crossPage\\' /> ';\r\n                html += \"include Cross pages\";\r\n                html += \"</label>\";\r\n                html += \"</div>\";\r\n                html += '<div class=\"input-group\">';\r\n                html += '<input placeholder=\"Minimum seeders\" class=\"form-control\" type=\\'number\\' min=\\'0\\' id=\\'MinSeeds\\' title=\\'Any episode that is below this limit will be excluded from the download.\\'/>';\r\n                html += '<span class=\"input-group-btn\">';\r\n                html += '<button class=\"btn btn-default\" type=\\'button\\' id=\\'SaveMinSeeds\\'>Save</button>';\r\n                html += \"</span>\";\r\n                html += \"</div>\";\r\n                html += '<div id=\\'tableInfo\\'>';\r\n                html += UI.buildTable();\r\n                html += '</div>';\r\n                html += '<div id=\\'alertUser\\' class=\\'hide\\'></div>';\r\n                html += '<div class=\\'selectAnime\\' id=\\'selectAnime\\'>';\r\n                html += UI.buildSelect();\r\n                html += '</div>';\r\n                html += '<input class=\"form-control\" type=\\'text\\' id=\\'findEp\\' placeholder=\\'Search Select (or use regex) \\' />';\r\n                html += '<button class=\"btn btn-default\" disabled id=\\'acceptSelect\\' data-type=\\'downloadSelects\\'>Select for download</button>';\r\n                html += '<div id=\\'parseErrors\\' class =\\'hide\\'></div>';\r\n                $('#pannelContent').html(html);\r\n            }\r\n        }\r\n        function afterBuild() {\r\n            makeCheckBoxes();\r\n            sortLists();\r\n            function makeCheckBoxes() {\r\n                $('.tlistdownload > a').after('<input class=\\'checkboxes\\' type=\\'checkbox\\'/>');\r\n            }\r\n            function sortLists() {\r\n                Utils.sortAllControls();\r\n            }\r\n        }\r\n    }\r\n    static bindListeners() {\r\n        Utils.reBindSelectFilters();\r\n        $('#downloadAll').on('click', function (e) {\r\n            Utils.doDownloads(e);\r\n        });\r\n        $('.checkboxes').on('click', function (e) {\r\n            if (Utils.checkBoxValid($('.checkboxes'))) {\r\n                Utils.enableButton($('#downloadCustomButton'));\r\n            }\r\n            else {\r\n                Utils.disableButton($('#downloadCustomButton'));\r\n            }\r\n        });\r\n        $('#crossPage').on('click', function (e) {\r\n            preformParsing(Anime.getPageUrls());\r\n            function preformParsing(urls) {\r\n                if (urls.length === 0) {\r\n                    return;\r\n                }\r\n                if (Utils.checkBoxValid($('#crossPage'))) {\r\n                    $('#tableInfo').html('<p>Please wait while we parse each page...</p>');\r\n                    $('#selectAnime').html('');\r\n                    $('#acceptSelect').hide();\r\n                    $('#crossPage, #downloadAll').prop('disabled', true);\r\n                    $('#parseErrors').slideUp('fast', function () {\r\n                        $(this).html('');\r\n                    });\r\n                    let AjaxInfo = {\r\n                        error: {\r\n                            pageAtError: null\r\n                        },\r\n                        currentPage: null\r\n                    };\r\n                    let ajaxPromiseMap = new Map();\r\n                    let arrayd = [];\r\n                    for (let i = 0; i < urls.length; i++) {\r\n                        let d = $.Deferred();\r\n                        ajaxPromiseMap.set(urls[i], d);\r\n                        arrayd.push(d);\r\n                    }\r\n                    $.when.apply($, arrayd).done(function () {\r\n                        if (AjaxInfo.error.pageAtError !== null) {\r\n                            UI.showAjaxErrorAlert(AjaxInfo);\r\n                        }\r\n                        $('#tableInfo').html(UI.buildTable());\r\n                        $('#downloadRes').html(UI.buildDropdownSelections());\r\n                        $('#selectAnime').html(UI.buildSelect());\r\n                        Utils.sortAllControls();\r\n                        $('#acceptSelect').show();\r\n                        Utils.reBindSelectFilters();\r\n                        $('#crossPage, #downloadAll').prop('disabled', false);\r\n                    });\r\n                    let timeOut = 0;\r\n                    for (let [cur, deferr] of ajaxPromiseMap) {\r\n                        let currentPage = 0;\r\n                        let queryObjet = Utils.getQueryFromUrl(cur);\r\n                        if (queryObjet.p) {\r\n                            currentPage = queryObjet.p;\r\n                        }\r\n                        else {\r\n                            currentPage = 1;\r\n                        }\r\n                        setTimeout(() => {\r\n                            let ajax = $.ajax(cur);\r\n                            ajax.done(function (data) {\r\n                                AjaxInfo.currentPage = currentPage;\r\n                                let table = $(data).find((\"table\"));\r\n                                let parser = new DataParser(table);\r\n                                $('#tableInfo').append('<div>Page ' + currentPage + ' Done </div>');\r\n                                Anime.addAllEps(parser.parseTable(currentPage));\r\n                            }).fail(function () {\r\n                                AjaxInfo.error.pageAtError = Number.parseInt(cur.split('=').pop());\r\n                                $('#tableInfo').append('<div>Page ' + currentPage + ' Done </div>');\r\n                            }).always(function () {\r\n                                deferr.resolve();\r\n                            });\r\n                        }, timeOut);\r\n                        timeOut += 350;\r\n                    }\r\n                }\r\n                else {\r\n                    // noinspection JSMismatchedCollectionQueryUpdate\r\n                    let tableInfoElm = $('#tableInfo');\r\n                    tableInfoElm.html('<p>Please wait while we re-calculate the Episodes</p>');\r\n                    let currentPage = Utils.getCurrentPageOffset();\r\n                    Anime.removeEpisodesFromResidence(currentPage, true);\r\n                    Utils.cleanAvailableResolutions();\r\n                    $('#downloadRes').html(UI.buildDropdownSelections());\r\n                    tableInfoElm.html(UI.buildTable());\r\n                    $('#selectAnime').html(UI.buildSelect());\r\n                    Utils.reBindSelectFilters();\r\n                    Utils.sortAllControls();\r\n                }\r\n            }\r\n        });\r\n        $('#SaveMinSeeds').on('click', function (e) {\r\n            if (parseInt($('#MinSeeds').val()) < 0) {\r\n                alert('number cannot be negative');\r\n                return;\r\n            }\r\n            let value;\r\n            value = $('#MinSeeds').val() === '' ? parseInt(\"-1\") : parseInt($('#MinSeeds').val());\r\n            Localstore.setMinSeedsFromStore(value);\r\n            if (value === -1) {\r\n                alert('Minimum seeds have been cleared');\r\n            }\r\n            else {\r\n                alert('Minimum seeds now set to: ' + value);\r\n            }\r\n            $('#selectAnime').html(UI.buildSelect());\r\n            Utils.sortAllControls();\r\n            Utils.reBindSelectFilters();\r\n        });\r\n        $('#collapseToggle').on('click', function () {\r\n            $('#pannelContent').stop(true, true).slideToggle('slow', function () {\r\n                let elm = $('#collapseToggle');\r\n                if ($(this).is(':hidden')) {\r\n                    elm.removeClass('fa-minus').addClass('fa-plus');\r\n                    elm.attr('title', 'Show');\r\n                }\r\n                else {\r\n                    elm.addClass('fa-minus').removeClass('fa-plus');\r\n                    elm.attr('title', 'Hide');\r\n                }\r\n            });\r\n        });\r\n        $('#acceptSelect').on('click', function (e) {\r\n            Utils.doDownloads(e);\r\n        });\r\n        $('#findEp').on('keyup', function () {\r\n            UI.applySearch($(this).val());\r\n        });\r\n    }\r\n}\r\nMain.main();\r\n"]}